SSLContext sslContext = SSLContexts.custom()
        .loadTrustMaterial(null, TrustAllStrategy.INSTANCE)   // or your own
        .build();

TlsStrategy tlsStrategy = ClientTlsStrategyBuilder.create()
        .setSslContext(sslContext)
        .setHostnameVerifier(NoopHostnameVerifier.INSTANCE)
        .build();

PoolingHttpClientConnectionManager cm =
        PoolingHttpClientConnectionManagerBuilder.create()
            .setTlsStrategy(tlsStrategy)           // ‚Üê new API replaces setSSLSocketFactory
            .build();

CloseableHttpClient client = HttpClients.custom()
        .setConnectionManager(cm)
        .build();
